{
  "openapi": "3.0.1",
  "info": {
    "title": "Swagger PDF Clasificator",
    "description": "Servicio de Extracción y clasificación de PDF",
    "version": "22.02.01"
  },
  "servers": [
    {
      "description": "localhost",
      "url": ""
    },
    {
      "description": "other",
      "url": "{server}",
      "variables": {
        "server": {
          "default": ""
        }
      }
    }
  ],
  "paths": {
    "/ping": {
      "get": {
        "tags": [
          "Servicio"
        ],
        "summary": "Estado del servicio",
        "description": "Estado del servicio",
        "operationId": "ping",
        "responses": {
          "200": {
            "$ref": "#/components/responses/ping"
          },
          "500": {
            "$ref": "#/components/responses/error500"
          }
        }
      }
    },
    "/reinit": {
      "get": {
        "tags": [
          "Servicio"
        ],
        "summary": "Reinicio del servicio",
        "description": "Reinicio del servicio",
        "operationId": "reinit",
        "responses": {
          "200": {
            "$ref": "#/components/responses/reinit"
          },
          "500": {
            "$ref": "#/components/responses/errorReinit"
          }
        }
      }
    },
    "/clasificar/file": {
      "post": {
        "tags": [
          "clasificar"
        ],
        "summary": "clasificar el texto del documento PDF a traves del fichero",
        "description": "clasificar el texto del documento PDF a traves del fichero",
        "operationId": "clasificar/file",
        "parameters": [
          {
            "$ref": "#/components/parameters/top_K"
          },
          {
            "$ref": "#/components/parameters/pages"
          },
          {
            "$ref": "#/components/parameters/lang"
          },
          {
            "$ref": "#/components/parameters/force_top"
          }
        ],
        "requestBody": {
          "$ref": "#/components/requestBodies/clasificarFile"
        },
        "responses": {
          "200": {
            "$ref": "#/components/responses/clasificarFilePath"
          },
          "500": {
            "$ref": "#/components/responses/error500"
          }
        }
      }
    }
  },
  "components": {
    "requestBodies": {
      "clasificarFile": {
        "content": {
          "multipart/form-data": {
            "schema": {
              "type": "object",
              "required": [
                "file"
              ],
              "properties": {
                "file": {
                  "type": "string",
                  "description": "Archivo pdf a Extraer",
                  "format": "binary"
                }
              }
            }
          }
        }
      },
      "clasificarPath": {
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": [
                "file"
              ],
              "properties": {
                "file": {
                  "type": "string",
                  "description": "Archivo pdf a Clasificar",
                  "nullable": false
                }
              }
            }
          }
        }
      }
    },
    "parameters": {
      "top_K": {
        "in": "query",
        "name": "top_k",
        "description": "Top de clasificaciones",
        "schema": {
          "type": "integer"
        }
      },
      "pages": {
        "in": "query",
        "name": "pages",
        "description": "Páginas a clasificar",
        "schema": {
          "type": "string"
        }
      },
      "lang": {
        "in": "query",
        "name": "lang",
        "description": "Idiomas para OCR",
        "schema": {
          "type": "string"
        }
      },
      "force_top": {
        "in": "query",
        "name": "force_top",
        "description": "Forzar a top_k el número de resultados",
        "schema": {
          "type": "boolean"
        }
      }
    },
    "responses": {
      "ping": {
        "description": "Respuesta de ping",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "descripción": {
                  "type": "string",
                  "description": "Descripción servicio"
                },
                "URL de acceso": {
                  "type": "string",
                  "description": "URL de Solicitud"
                },
                "Version": {
                  "type": "string",
                  "description": "Version"
                },
                "Host": {
                  "type": "string",
                  "description": "Host"
                },
                "Port": {
                  "type": "integer",
                  "description": "Port"
                },
                "Servername": {
                  "type": "string",
                  "description": "Servername"
                },
                "PID": {
                  "type": "integer",
                  "description": "PID servicio"
                }
              }
            }
          }
        }
      },
      "reinit": {
        "description": "Reinicio del servicio",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Reinicio del servicio",
              "properties": {
                "msg": {
                  "type": "string",
                  "description": "OK"
                },
                "stdout": {
                  "type": "string",
                  "description": "Mensaje de stdout"
                },
                "stderr": {
                  "type": "string",
                  "description": "Mensaje de stderr"
                }
              }
            }
          }
        }
      },
      "error500": {
        "description": "Respuesta de error 500",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Respuesta de error 500",
              "properties": {
                "errmsg": {
                  "type": "string",
                  "description": "Mensaje de error"
                }
              }
            }
          }
        }
      },
      "errorReinit": {
        "description": "Respuesta de error 500 en reinicio",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Respuesta de error 500 en reinicio",
              "properties": {
                "msg": {
                  "type": "string",
                  "description": "Mensaje de error en reinicio"
                },
                "stdout": {
                  "type": "string",
                  "description": "Mensaje de error stdout"
                },
                "stderr": {
                  "type": "string",
                  "description": "Mensaje de error stderr"
                }
              }
            }
          }
        }
      },
      "clasificarFilePath": {
        "description": "Respuesta correcta de la extracción de Pdf",
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "ret": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  }
}